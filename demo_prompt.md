# デモで使う予定のプロンプト集
## 最初の設計の壁打ち

Chrome拡張を実装するための計画を一緒に考えたいです。実装したい機能を以下に書いていくので、それをまとめてください。また、詳細が不明な点があればさらに詳しく答えますので、私に質問してください。

- リーディングリストに登録されたエントリのうち一定期間が経過したら自動的に既読にする
- 既読になったエントリはさらに一定期間が経過したらリストから削除する
- 既読にするタイミングでLLMで要約を作成し、Slackに投稿する
- LLMはOpenAIのSDKを利用し、OpenAI互換のAPIでOpenRouterやLMStudioのモデルを利用可能にする
- OpenAI互換APIのための設定はオプション画面で設定し、Chromeのlocal設定に保存する
- UIはオプション画面だけ作成してください

----

リーディングリストはChromeの元々の機能を使います。chrome.readingListのAPIです。
一定期間はオプション画面でそれぞれ設定可能にしたいです。デフォルトは既読化が30日、削除が60日とします。
Slack連携はWebhook URLのみ対応で十分です。
LLMモデル選択のプリセットは不要です。ユーザーにモデル名も入力してもらいます。
要約はタイトル、URL、本文です。本文は3文の600文字以内に要約してほしいです。

----

本文抽出は将来的には自前で実装したいですが、最初はFirecrawl（https://www.firecrawl.dev/）を使ってください。jsのSDKが存在するようなのでこれを使ってください https://docs.firecrawl.dev/sdks/node
本文抽出やLLMの要約が失敗した場合はまずリトライを試してみてください。exponentioal backoffで3回までリトライしましょう。
リトライしても本文抽出やLLMの要約が失敗した場合は、Slackに投稿する際にタイトルとURLは表示しつつ本文には要約を作成できなかった理由を入れてください。
Slack投稿のフォーマットは以下です。

```
{title}
{url}

{model_name}による要約

{本文section1}

{本文section2}

{本文section3}
```

----

ここまでにまとめた仕様の詳細をissueにしてもらえますか？

## sub-issueの作成
(最初に作ったissueの画面を開いてCopilotのチャットを改めて開き、issueをアタッチした状態で、)
このissueを実装するための手順を分解してください。
特に機能ごとに分解して1つ1つが確実に動作することを確認しながら次のステップに進めるように分解してほしいです。

----

環境のセットアップは大体完了済みです。必要なSDKのインストールは、それが必要なステップで個別に行ってください。
それぞれのステップでユニットテストの追加も行ってください。
オプション画面の項目はそれが必要なステップで個別に追加してください。

----
1-4までのステップを最初のissueのsub-issueとして登録してください。
issueの内容は、概要、実装ステップの箇条書き、ユニットテストの内容、オプション画面の変更内容を含めてください。
assigneeはKesin11、projectはvscode-dev-day-tokyo demoにしてください。

## sub-issueを渡して実装
/auto_impl_issue https://github.com/Kesin11/vscode-dev-day-tokyo-demo/issues/2

----
VitestのスタブやモックはこのURLを参考にしてください
https://vitest.dev/guide/mocking

## レビュー修正
/pull_request_review_fix 
